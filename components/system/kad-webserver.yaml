
components:

  - name: kad-webserver
    version: 1.0.0
    protected: true
    source:
      defaultVersion: 0.4.0-snapshot
      allowedVersions:
        - 0.4.0-snapshot
        - 0.5.0-snapshot
      ociRepository:
        url: oci://quay.io/kubotal/charts/kad-webserver
        interval: 1m
    parameters:
      debug: false
      deploymentLocation: # TBD
    catalogs:
      - system
    contextSchema:
      file: _schemas_/context/kad-webserver.yaml
    dependsOn:
      - ingress
    values: |
      clusterIssuer: {{ .Context.certificateIssuer.public }}
      ingress:
        host: kad.{{ .Context.ingress.url }}
      webConfig:
        getGateway:
          deploymentLocation: {{ .Parameters.deploymentLocation }}
      {{- if .Parameters.debug }}
      replicaCount: 1
      logger:
        mode: dev
        level: debug
      image:
        pullPolicy: Always
      {{- else }}
      replicaCount: 1    # Currently, pb if > 1
      {{- end }}

