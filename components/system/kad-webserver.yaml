
components:

  - name: kad-webserver
    version: 1.0.0
    protected: true
    source:
      defaultVersion: 0.4.0-snapshot
      allowedVersions:
        - 0.4.0-snapshot
        - 0.5.0-snapshot
      ociRepository:
        url: oci://quay.io/kubotal/charts/kad-webserver
        interval: 1m
    parameters:
      debug: false
      replicaCount: 2
      deploymentLocation: # TBD
    catalogs:
      - system
    parametersSchema:
      file: _schemas_/parameters/kad-webserver.yaml
    contextSchema:
      file: _schemas_/context/kad-webserver.yaml
    dependsOn:
      - ingress
    values: |
      replicaCount: {{ .Parameters.replicaCount }}
      clusterIssuer: {{ .Context.certificateIssuer.public }}
      ingress:
        host: kad.{{ .Context.ingress.url }}
      webConfig:
        gitGateway:
          deploymentLocation: {{ .Parameters.deploymentLocation }}
      {{- if .Parameters.debug }}
      logger:
        mode: dev
        level: debug
      image:
        pullPolicy: Always
      {{- end }}

